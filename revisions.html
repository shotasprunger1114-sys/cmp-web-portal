<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Revision Request ‚Äî CMP Web Services</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<style>
  :root {
    --navy: #0A0A0A;
    --navy-light: #1A1A1A;
    --gold: #E02020;
    --red: #E02020;
    --white: #FFFFFF;
    --off-white: #F7F7F7;
    --border: #2A2A2A;
    --text: #FFFFFF;
    --muted: #888;
    --success: #27AE60;
    --card-bg: #141414;
    --input-bg: #1A1A1A;
    --input-border: #2A2A2A;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Inter',sans-serif; background:var(--navy); color:var(--text); min-height:100vh; }

  /* NAV */
  nav {
    background:#0D0D0D;
    padding:16px 32px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    border-bottom:1px solid var(--border);
    position:sticky; top:0; z-index:100;
  }
  .nav-brand { color:var(--white); font-size:15px; font-weight:700; text-decoration:none; }
  .nav-brand span { color:var(--gold); }
  .nav-links { display:flex; gap:16px; align-items:center; }
  .nav-link {
    color:rgba(255,255,255,0.6); font-size:13px; font-weight:500;
    text-decoration:none; transition:color 0.2s;
  }
  .nav-link:hover { color:var(--white); }
  .nav-badge {
    background:var(--gold); color:var(--white);
    padding:3px 10px; border-radius:20px; font-size:11px; font-weight:700;
  }

  /* HERO */
  .hero {
    background:linear-gradient(135deg, #0D0D0D 0%, #1a0505 100%);
    border-bottom:2px solid var(--gold);
    padding:48px 24px 40px;
    text-align:center;
  }
  .hero h1 { font-size:clamp(22px,4vw,32px); font-weight:700; color:var(--white); margin-bottom:10px; }
  .hero h1 span { color:var(--gold); }
  .hero p { color:rgba(255,255,255,0.55); font-size:15px; max-width:500px; margin:0 auto; line-height:1.6; }
  .hero-badge {
    display:inline-flex; align-items:center; gap:8px;
    background:rgba(224,32,32,0.1); border:1px solid rgba(224,32,32,0.3);
    color:var(--gold); font-size:12px; font-weight:600;
    padding:6px 16px; border-radius:20px; margin-top:16px;
  }

  /* FORM WRAP */
  .form-wrap {
    max-width:620px;
    margin:48px auto;
    padding:0 24px 60px;
  }

  /* CARD */
  .form-card {
    background:var(--card-bg);
    border:1px solid var(--border);
    border-radius:16px;
    padding:32px;
  }

  .section-label {
    font-size:11px; font-weight:700; letter-spacing:2px; text-transform:uppercase;
    color:var(--gold); margin-bottom:20px; display:flex; align-items:center; gap:8px;
  }
  .section-label::after {
    content:''; flex:1; height:1px; background:var(--border);
  }

  .field-group { margin-bottom:20px; }

  label {
    display:block; font-size:13px; font-weight:600; color:rgba(255,255,255,0.85);
    margin-bottom:7px; letter-spacing:0.2px;
  }
  label .req { color:var(--gold); margin-left:2px; }
  label .hint { font-weight:400; color:var(--muted); font-size:12px; }

  input[type=text],
  select,
  textarea {
    width:100%; padding:13px 16px;
    border:1.5px solid var(--input-border);
    border-radius:8px;
    font-family:'Inter',sans-serif; font-size:15px;
    color:var(--white); background:var(--input-bg);
    transition:border-color 0.2s, box-shadow 0.2s;
    outline:none; -webkit-appearance:none;
  }
  input:focus, select:focus, textarea:focus {
    border-color:var(--gold);
    box-shadow:0 0 0 3px rgba(224,32,32,0.1);
  }
  textarea { resize:vertical; min-height:140px; line-height:1.6; }
  select {
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23888' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat:no-repeat; background-position:right 14px center; padding-right:40px; cursor:pointer;
  }
  select option { background:#1A1A1A; }

  /* HIDDEN FIELD */
  .hidden { display:none !important; }

  /* PRIORITY CARDS */
  .priority-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
  .priority-card {
    border:2px solid var(--input-border);
    border-radius:10px; padding:18px 16px;
    cursor:pointer; transition:all 0.2s;
    background:var(--input-bg);
    text-align:center; user-select:none;
  }
  .priority-card:hover { border-color:rgba(224,32,32,0.4); }
  .priority-card.selected { border-color:var(--gold); background:rgba(224,32,32,0.08); }
  .priority-card input { display:none; }
  .priority-icon { font-size:28px; margin-bottom:8px; display:block; }
  .priority-name { font-size:15px; font-weight:700; color:var(--white); margin-bottom:4px; }
  .priority-desc { font-size:12px; color:var(--muted); line-height:1.4; }

  /* ERROR */
  .field-error { font-size:12px; color:var(--gold); margin-top:5px; font-weight:500; display:none; }
  .field-group.has-error input,
  .field-group.has-error select,
  .field-group.has-error textarea { border-color:var(--gold); }
  .field-group.has-error .field-error { display:block; }

  /* SUBMIT BUTTON */
  .btn-submit {
    background:var(--gold); color:var(--white);
    width:100%; padding:16px;
    border-radius:10px; font-size:16px; font-weight:700;
    border:none; cursor:pointer;
    font-family:'Inter',sans-serif;
    transition:all 0.2s; margin-top:8px;
    display:flex; align-items:center; justify-content:center; gap:8px;
  }
  .btn-submit:hover { background:#c01818; transform:translateY(-1px); box-shadow:0 8px 24px rgba(224,32,32,0.3); }
  .btn-submit:disabled { opacity:0.6; cursor:not-allowed; transform:none; box-shadow:none; }

  /* THANK YOU */
  #thank-you {
    display:none;
    text-align:center;
    padding:60px 24px;
    max-width:560px;
    margin:0 auto;
  }
  .ty-icon { font-size:72px; margin-bottom:20px; }
  .ty-title { font-size:28px; font-weight:700; color:var(--white); margin-bottom:10px; }
  .ty-sub { font-size:15px; color:var(--muted); line-height:1.7; margin-bottom:32px; }
  .ty-card {
    background:var(--card-bg); border:1px solid var(--border);
    border-radius:12px; padding:24px; text-align:left; margin-bottom:20px;
  }
  .ty-card-title { font-size:11px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--gold); margin-bottom:14px; }
  .ty-step { display:flex; gap:12px; align-items:flex-start; margin-bottom:12px; }
  .ty-step-dot { width:24px; height:24px; border-radius:50%; background:var(--gold); color:#fff; font-size:11px; font-weight:700; display:flex; align-items:center; justify-content:center; flex-shrink:0; margin-top:1px; }
  .ty-step-text { font-size:14px; color:rgba(255,255,255,0.8); line-height:1.5; }
  .back-link { color:var(--gold); text-decoration:none; font-size:14px; font-weight:600; }
  .back-link:hover { text-decoration:underline; }

  @media(max-width:520px) {
    nav { padding:14px 16px; }
    .hero { padding:36px 16px 28px; }
    .form-wrap { padding:0 16px 40px; }
    .form-card { padding:24px 20px; }
    .priority-row { grid-template-columns:1fr; }
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <a href="dashboard.html" class="nav-brand">Create More <span>Productions</span></a>
  <div class="nav-links">
    <a href="dashboard.html" class="nav-link">‚Üê Mission Control</a>
    <span class="nav-badge">Internal</span>
  </div>
</nav>

<!-- HERO -->
<div class="hero">
  <h1>Request a <span>Revision</span></h1>
  <p>Submit exactly what needs to change. Jarvis picks it up automatically and deploys the update.</p>
  <div class="hero-badge">‚ö° Auto-Deploy on Submit</div>
</div>

<!-- FORM -->
<div class="form-wrap">
  <form id="revision-form" novalidate>
    <div class="form-card">

      <div class="section-label">Project Details</div>

      <!-- PROJECT SELECT -->
      <div class="field-group" id="fg-project">
        <label>Project <span class="req">*</span></label>
        <select id="project" onchange="handleProjectChange()">
          <option value="">Select a project...</option>
          <option value="Pro Realty Group">Pro Realty Group</option>
          <option value="APX RCM">APX RCM</option>
          <option value="Create More Productions">Create More Productions</option>
          <option value="Other">Other (specify below)</option>
        </select>
        <div class="field-error">Please select a project</div>
      </div>

      <!-- CUSTOM CLIENT NAME (shown only if "Other") -->
      <div class="field-group hidden" id="fg-clientName">
        <label>Client Name <span class="req">*</span></label>
        <input type="text" id="clientName" placeholder="Enter client or project name..." />
        <div class="field-error">Required when selecting Other</div>
      </div>

      <div class="section-label" style="margin-top:28px">Revision Details</div>

      <!-- REVISION DETAILS -->
      <div class="field-group" id="fg-revisionDetails">
        <label>What needs to change? <span class="req">*</span> <span class="hint">‚Äî be as specific as possible</span></label>
        <textarea id="revisionDetails" rows="6" placeholder="Example: On the hero section, change the headline from 'Book a Call' to 'Schedule Your Free Consultation'. Also update the phone number in the footer from (248) 555-0100 to (248) 555-0199. The CTA button color should match the new brand red (#C01818)..."></textarea>
        <div class="field-error">Please describe what needs to change</div>
      </div>

      <div class="section-label" style="margin-top:8px">Priority</div>

      <!-- PRIORITY -->
      <div class="field-group" id="fg-priority">
        <div class="priority-row">
          <label class="priority-card selected" id="priority-normal">
            <input type="radio" name="priority" value="Normal" checked />
            <span class="priority-icon">üü¢</span>
            <div class="priority-name">Normal</div>
            <div class="priority-desc">Next available build slot. Usually same day.</div>
          </label>
          <label class="priority-card" id="priority-urgent">
            <input type="radio" name="priority" value="Urgent" />
            <span class="priority-icon">üî¥</span>
            <div class="priority-name">Urgent</div>
            <div class="priority-desc">Drop everything. Client-facing issue or time-sensitive.</div>
          </label>
        </div>
        <div class="field-error">Please select a priority</div>
      </div>

      <!-- SUBMIT -->
      <button type="submit" class="btn-submit" id="submit-btn">
        <span id="btn-text">Submit Revision Request ‚Üí</span>
      </button>

    </div>
  </form>

  <!-- THANK YOU -->
  <div id="thank-you">
    <div class="ty-icon">‚úÖ</div>
    <h2 class="ty-title">Revision queued!</h2>
    <p class="ty-sub">Request logged to #web-revisions. Jarvis will pick it up within 15 minutes and auto-deploy the change.</p>

    <div class="ty-card">
      <div class="ty-card-title">What happens next</div>
      <div class="ty-step">
        <div class="ty-step-dot">1</div>
        <div class="ty-step-text"><strong>Jarvis reads the request</strong> from #web-revisions within 15 minutes.</div>
      </div>
      <div class="ty-step">
        <div class="ty-step-dot">2</div>
        <div class="ty-step-text"><strong>Changes are applied</strong> to the project source files and deployed.</div>
      </div>
      <div class="ty-step">
        <div class="ty-step-dot">3</div>
        <div class="ty-step-text"><strong>You get a ping in #general</strong> with the live URL to QC.</div>
      </div>
    </div>

    <a href="revisions.html" class="back-link">Submit another revision ‚Üí</a>
    &nbsp;&nbsp;
    <a href="dashboard.html" class="back-link">Back to Mission Control ‚Üí</a>
  </div>
</div>

<script>
// Priority card selection
document.querySelectorAll('.priority-card').forEach(card => {
  card.addEventListener('click', () => {
    document.querySelectorAll('.priority-card').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    card.querySelector('input').checked = true;
  });
});

function handleProjectChange() {
  const val = document.getElementById('project').value;
  const clientNameGroup = document.getElementById('fg-clientName');
  if (val === 'Other') {
    clientNameGroup.classList.remove('hidden');
  } else {
    clientNameGroup.classList.add('hidden');
    document.getElementById('fg-clientName').classList.remove('has-error');
  }
}

function validate() {
  let valid = true;

  const project = document.getElementById('project').value;
  const fg_project = document.getElementById('fg-project');
  if (!project) { fg_project.classList.add('has-error'); valid = false; }
  else fg_project.classList.remove('has-error');

  if (project === 'Other') {
    const clientName = document.getElementById('clientName').value.trim();
    const fg_cn = document.getElementById('fg-clientName');
    if (!clientName) { fg_cn.classList.add('has-error'); valid = false; }
    else fg_cn.classList.remove('has-error');
  }

  const details = document.getElementById('revisionDetails').value.trim();
  const fg_details = document.getElementById('fg-revisionDetails');
  if (details.length < 10) { fg_details.classList.add('has-error'); valid = false; }
  else fg_details.classList.remove('has-error');

  return valid;
}

document.getElementById('revision-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  if (!validate()) return;

  const btn = document.getElementById('submit-btn');
  const btnText = document.getElementById('btn-text');
  btn.disabled = true;
  btnText.textContent = 'Submitting...';

  const project = document.getElementById('project').value;
  const clientName = project === 'Other'
    ? document.getElementById('clientName').value.trim()
    : project;
  const revisionDetails = document.getElementById('revisionDetails').value.trim();
  const priority = document.querySelector('input[name=priority]:checked')?.value || 'Normal';

  // Send to Discord webhook (web-revisions channel)
  const WEBHOOK = 'https://discord.com/api/webhooks/1474662040114036896/jTIJRTIW0w8bHLs1kOb9Njt8CkFDvO1A4AFt4iXSs61xFrPCZTZyD2iXUSujbnGkngMZ';

  const urgentColor = priority === 'Urgent' ? 0xE02020 : 0x27AE60;
  const urgentLabel = priority === 'Urgent' ? 'üî¥ URGENT' : 'üü¢ Normal';

  const embed = {
    embeds: [{
      title: `üîß Revision Request ‚Äî ${clientName}`,
      color: urgentColor,
      fields: [
        { name: 'üìÅ Project', value: clientName, inline: true },
        { name: '‚ö° Priority', value: urgentLabel, inline: true },
        { name: 'üìù What Needs to Change', value: revisionDetails.substring(0, 1000), inline: false }
      ],
      footer: { text: 'CMP Web Revisions ¬∑ Auto-deploy queued' },
      timestamp: new Date().toISOString()
    }]
  };

  try {
    await fetch(WEBHOOK, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(embed)
    });
  } catch(err) {
    // Best effort ‚Äî still show success
    console.warn('Webhook error:', err);
  }

  showThankYou();
});

function showThankYou() {
  document.getElementById('revision-form').style.display = 'none';
  document.getElementById('thank-you').style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>
